<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC 
          "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" >
<h:head>
	<!-- <h:outputStylesheet library="resources/css" name="table-style.css"  /> -->
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</h:head>
<h:body>

	<ui:include src="composants/menu.xhtml"/>
	
	<h:panelGroup rendered="#{UserLoginCtrl.suisJeCo()}">
	<center> <h2> Ajouter une annonce </h2> </center>
	
	<h:form>
		<h:panelGrid border="0" columns="3" cellpadding="5">
			<h:outputText value="Designation *" />
			<h:inputText id="Designation" value="#{annonceCtrl.newAnnonce.designation}"
				required="true" requiredMessage="Designation obligatoire" binding="#{iDesg}" />
			<h:message for="Designation" />
			
			<h:outputText value="Description" />
			<h:inputText id="Description" value="#{annonceCtrl.newAnnonce.description}" binding="#{iDesc}"/><br/>
			
			<h:outputText value="Surface *" />
			<h:inputText id="Surface" value="#{annonceCtrl.newAnnonce.surface}"
				required="true" requiredMessage="Surface obligatoire" binding="#{iSurf}" />
			<h:message for="Surface" />
			
			<h:outputText value="Prix *" />
			<h:inputText id="Prix" value="#{annonceCtrl.newAnnonce.prix}" binding="#{iPrix}"
				required="true" requiredMessage="Prix obligatoire" />
			<h:message for="Prix" />
					
			<br/>
		</h:panelGrid>
		
		<fieldset>
				<legend>Adresse</legend>
				
				<h:outputText value="Libelle: " />
				<h:inputText id="Libelle" value="#{annonceCtrl.newAnnonce.adresseAnn.libelle}"  binding="#{iLib}"/>
				<br/><br/>
						
				<h:outputText value="Code Postal: * " />
				<h:inputText id="cdp" value="#{annonceCtrl.newAnnonce.adresseAnn.codePostal}"
					required="true" requiredMessage="Code Postal obligatoire" binding="#{iCdp}" />
				<h:message for="cdp" /><br/><br/>
				
				<h:outputText value="Ville: * " />
				<h:inputText id="ville" value="#{annonceCtrl.newAnnonce.adresseAnn.ville}"
					required="true" requiredMessage="Ville obligatoire" binding="#{iVille}"/>
				<h:message for="ville" /><br/><br/>
							
				<h:outputText value="Region: * " />
				<h:selectOneMenu id="region" value="#{regionCtrl.nomRegSelect}">
   				<f:selectItems value="#{regionCtrl.regions}" var="r" itemValue="#{r.nomRegion}" binding="#{iReg}"/>
   				</h:selectOneMenu>
				<h:message for="region" />	
			</fieldset>
			<br/>
			<fieldset>
				<legend>Ajouter images</legend>
				<p:fileUpload mode="simple" value="{annonceCtrl.uploadedFile}" binding="#{iImg}"/>
				<p:commandButton type="submit" value="Upload" action="#{annonceCtrl.upload()}" ajax="false" />
			</fieldset>
			
			<br/>
			
       		<h:messages style="color:red" />			
			<h:commandButton type="submit" value="Ajouter" action="#{annonceCtrl.creerAnnonce(iDesg.value, iDesc.value, iSurf.value, iPrix.value, iLib.value, iCdp.value, iVille.value)}" />
	</h:form>
	</h:panelGroup>
	<h:panelGroup rendered="#{UserLoginCtrl.suisJePasCo()}">
		Vous devez être connecté pour voir cette page.
	</h:panelGroup>
		
</h:body>
</html>